(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{8903:function(e,s,t){Promise.resolve().then(t.bind(t,8283))},8283:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var r=t(3827),a=t(4090),n=t(4108),l=t(4958);function u(){let{user:e,profile:s,loading:t,signIn:u,signOut:i}=(0,n.useAuth)(),[c,o]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[g,x]=(0,a.useState)(""),b=async()=>{x("测试登录中...");let e=await u(c,d);x(e.success?"✅ 登录成功！":"❌ 失败：".concat(e.error))},m=async()=>{x("测试注册中...");let{signUp:e}=(0,n.useAuth)(),s=await e(c,d);x(s.success?"✅ 注册成功！请检查邮箱":"❌ 失败：".concat(s.error))};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-100 p-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-2xl shadow-xl p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\uD83D\uDD27 Supabase 连接测试"}),(0,r.jsxs)("div",{className:"p-4 rounded-xl mb-6 ".concat(l.j?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[(0,r.jsx)("p",{className:"text-lg font-semibold mb-2",children:l.j?"✅ Supabase 已配置":"❌ Supabase 未配置"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:l.j?"URL: ".concat("https://zrbcxtamglfjarupqkic.supabase.co"):"请检查 .env.local 文件"})]}),(0,r.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl mb-6",children:[(0,r.jsx)("p",{className:"text-lg font-semibold mb-2",children:"\uD83D\uDC64 用户状态"}),t?(0,r.jsx)("p",{className:"text-gray-600",children:"加载中..."}):e?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-700",children:"✅ 已登录"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["邮箱：",e.email]}),s&&(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["姓名：",s.full_name||"未设置"]}),(0,r.jsx)("button",{onClick:async()=>{await i(),x("✅ 已退出登录")},className:"mt-3 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:"退出登录"})]}):(0,r.jsx)("p",{className:"text-gray-600",children:"❌ 未登录"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"测试登录/注册"}),(0,r.jsx)("input",{type:"email",value:c,onChange:e=>o(e.target.value),placeholder:"测试邮箱",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"}),(0,r.jsx)("input",{type:"password",value:d,onChange:e=>h(e.target.value),placeholder:"测试密码（至少 6 位）",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:b,className:"flex-1 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition",children:"测试登录"}),(0,r.jsx)("button",{onClick:m,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition",children:"测试注册"})]}),g&&(0,r.jsx)("div",{className:"p-4 rounded-lg ".concat(g.includes("✅")?"bg-green-50 text-green-700":g.includes("❌")?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"),children:g})]}),(0,r.jsxs)("div",{className:"mt-8 pt-6 border-t",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"\uD83D\uDD17 快速链接"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsx)("a",{href:"https://supabase.com/dashboard/project/zrbcxtamglfjarupqkic",target:"_blank",className:"block text-indigo-600 hover:underline",children:"→ Supabase Dashboard"}),(0,r.jsx)("a",{href:"https://supabase.com/dashboard/project/zrbcxtamglfjarupqkic/auth/users",target:"_blank",className:"block text-indigo-600 hover:underline",children:"→ 用户管理"}),(0,r.jsx)("a",{href:"/",className:"block text-indigo-600 hover:underline",children:"→ 返回主页"})]})]})]})})}},4958:function(e,s,t){"use strict";t.d(s,{O:function(){return u},j:function(){return l}});var r=t(7688);let a="https://zrbcxtamglfjarupqkic.supabase.co",n="sb_publishable_B9aae0u1JmEcOybu_E409Q_Z2r9GkDt",l=!!a&&!!n,u=l?(0,r.eI)(a,n):{auth:{getUser:async()=>({data:{user:null},error:null}),getSession:async()=>({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signUp:async()=>({data:null,error:{message:"Supabase not configured"}}),signInWithPassword:async()=>({data:null,error:{message:"Supabase not configured"}}),signOut:async()=>({error:null})},from:()=>({select:()=>({eq:()=>Promise.resolve({data:[],error:null}),insert:()=>Promise.resolve({data:null,error:null}),update:()=>Promise.resolve({data:null,error:null}),delete:()=>Promise.resolve({data:null,error:null})})})}},4108:function(e,s,t){"use strict";t.r(s),t.d(s,{AuthProvider:function(){return o},useAuth:function(){return d}});var r=t(3827),a=t(4090),n=t(4958);async function l(){try{let{error:e}=await n.O.auth.signOut();if(e)throw e;return{success:!0}}catch(e){return{success:!1,error:e.message}}}async function u(){try{let{data:{user:e}}=await n.O.auth.getUser();return e}catch(e){return null}}async function i(){try{let e=await u();if(!e)return null;let{data:s}=await n.O.from("profiles").select("*").eq("id",e.id).single();return s}catch(e){return null}}let c=(0,a.createContext)(void 0);function o(e){let{children:s}=e,[t,u]=(0,a.useState)(null),[o,d]=(0,a.useState)(null),[h,g]=(0,a.useState)(!0);(0,a.useEffect)(()=>{n.O.auth.getSession().then(e=>{var s;let{data:t}=e;u((null===(s=t.session)||void 0===s?void 0:s.user)||null),g(!1)});let{data:{subscription:e}}=n.O.auth.onAuthStateChange(async(e,s)=>{u((null==s?void 0:s.user)||null),(null==s?void 0:s.user)?d(await i()):d(null),g(!1)});return()=>e.unsubscribe()},[]);let x=async(e,s)=>{let{data:t,error:r}=await n.O.auth.signInWithPassword({email:e,password:s});return r?{success:!1,error:r.message}:(u(t.user),{success:!0})},b=async(e,s,t)=>{let{data:r,error:a}=await n.O.auth.signUp({email:e,password:s,options:{data:{full_name:t}}});return a?{success:!1,error:a.message}:(u(r.user),{success:!0})},m=async()=>{await l(),u(null),d(null)};return(0,r.jsx)(c.Provider,{value:{user:t,profile:o,loading:h,signIn:x,signUp:b,signOut:m},children:s})}function d(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[688,971,69,744],function(){return e(e.s=8903)}),_N_E=e.O()}]);